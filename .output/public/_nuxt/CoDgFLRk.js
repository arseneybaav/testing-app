import{_ as m,t as d,v as l,x as n,E as h,B as x,y as r,F as D,G as M,H as f,I as b,J as y,K as E,z as _,C as v,D as g,L as H}from"./CGpUBEBy.js";import{u as L}from"./CAI436gu.js";const O={data(){return{websocketStatus:"Disconnected",websocket:null,isHidden:!1,reconnectInterval:3e3,maxReconnectAttempts:10,currentReconnectAttempts:0}},mounted(){this.connectWebSocket()},methods:{connectWebSocket(){this.websocket=new WebSocket("ws://localhost:8081"),this.websocket.onopen=()=>{this.websocketStatus="Connected",this.currentReconnectAttempts=0},this.websocket.onclose=()=>{this.websocketStatus="Disconnected",(!this.websocket||this.websocket.readyState!==WebSocket.CLOSED)&&this.reconnectWebSocket()},this.websocket.onerror=()=>{this.websocketStatus="Error",this.reconnectWebSocket()}},reconnectWebSocket(){this.currentReconnectAttempts<this.maxReconnectAttempts?setTimeout(()=>{this.currentReconnectAttempts++,this.connectWebSocket()},this.reconnectInterval):console.log("Exceeded maximum reconnect attempts.")},toggleVisibility(){this.isHidden=!this.isHidden}},beforeDestroy(){this.websocket&&this.websocket.close()}};function X(t,e,i,c,o,s){return d(),l("div",{class:h(["info-field",{connected:o.websocketStatus==="Connected",disconnected:o.websocketStatus==="Disconnected",error:o.websocketStatus==="Error",hidden:o.isHidden}])},[n("button",{class:"toggle-button",onClick:e[0]||(e[0]=(...a)=>s.toggleVisibility&&s.toggleVisibility(...a))},[n("i",{class:h(["bi",{"bi-chevron-down":!o.isHidden,"bi-chevron-up":o.isHidden}])},null,2),x(" "+r(o.isHidden?"Show Info":"Hide Info"),1)]),D(n("p",null,"Status: "+r(o.websocketStatus),513),[[M,!o.isHidden]])],2)}const Y=m(O,[["render",X],["__scopeId","data-v-1badad86"]]),$={props:["isOpen","componentId"],data(){return{posX:0,posY:0,isDragging:!1}},methods:{closeModal(){this.$emit("close")},startDrag(t){this.isDragging=!0;const e=t.clientX-this.posX,i=t.clientY-this.posY,c=s=>{this.isDragging&&(this.posX=s.clientX-e,this.posY=s.clientY-i)},o=()=>{this.isDragging=!1,window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",o)};window.addEventListener("mousemove",c),window.addEventListener("mouseup",o)}}};function B(t,e,i,c,o,s){return i.isOpen?(d(),l("div",{key:0,class:"modal",onMousedown:e[1]||(e[1]=(...a)=>s.startDrag&&s.startDrag(...a))},[n("div",{class:"modal-content",style:f({top:o.posY+"px",left:o.posX+"px"})},[n("h2",null,r(i.componentId),1),n("p",null,"Тестовая статичная информация блока "+r(i.componentId),1),n("button",{onClick:e[0]||(e[0]=(...a)=>s.closeModal&&s.closeModal(...a))},"Close")],4)],32)):b("",!0)}const N=m($,[["render",B],["__scopeId","data-v-0a5d04a6"]]),W={props:["isOpen","componentId"],data(){return{modalTop:0,modalLeft:0,isDragging:!1}},methods:{closeModal(){this.$emit("close")},startDrag(t){this.isDragging=!0;const e=t.clientX-this.modalLeft,i=t.clientY-this.modalTop,c=s=>{this.isDragging&&(this.modalLeft=s.clientX-e,this.modalTop=s.clientY-i)},o=()=>{this.isDragging=!1,window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",o)};window.addEventListener("mousemove",c),window.addEventListener("mouseup",o)}}};function A(t,e,i,c,o,s){return i.isOpen?(d(),l("div",{key:0,class:"modal",onMousedown:e[1]||(e[1]=(...a)=>s.startDrag&&s.startDrag(...a))},[n("div",{class:"modal-content",style:f({top:o.modalTop+"px",left:o.modalLeft+"px"})},[n("h2",null,r(i.componentId),1),n("p",null,"Тестовая статичная информация блока "+r(i.componentId),1),n("button",{class:"btn btn-danger",onClick:e[0]||(e[0]=(...a)=>s.closeModal&&s.closeModal(...a))},"Close")],4)],32)):b("",!0)}const w=m(W,[["render",A],["__scopeId","data-v-e03f764f"]]),T={components:{Modal:w},data(){return{components:[{id:"Part #1",color:"#6CB2EB"},{id:"Part #2",color:"#9FE6A0"},{id:"Part #3",color:"#FFC154"}],isModalOpen:!1,modalComponentId:"",originalColor:"",websocket:null}},mounted(){this.websocket=new WebSocket("ws://localhost:8081"),this.websocket.onmessage=t=>{const e=JSON.parse(t.data),i=this.components.find(c=>c.id===e.elementId);i&&(i.color=e.color)}},methods:{openDialog(t){this.isModalOpen=!0,this.modalComponentId=t;const e=this.components.find(i=>i.id===t);e&&(this.originalColor=e.color),this.websocket.send(JSON.stringify({elementId:t,color:"red"}))},closeModal(){this.isModalOpen=!1;const t=this.components.find(e=>e.id===this.modalComponentId);t&&this.originalColor!==""&&(t.color=this.originalColor,this.websocket.send(JSON.stringify({elementId:this.modalComponentId,color:this.originalColor})),this.originalColor=""),this.modalComponentId=""}}},V=t=>(v("data-v-516ade20"),t=t(),g(),t),F={class:"mainfield"},R=V(()=>n("h1",null,"Circuit",-1)),z={width:"800",height:"400"},J=["transform"],P=["fill","onClick"],j={x:"-20",y:"4","font-size":"14",fill:"black","text-anchor":"middle"};function G(t,e,i,c,o,s){const a=w;return d(),l("div",F,[R,(d(),l("svg",z,[(d(!0),l(y,null,E(o.components,(p,u)=>(d(),l("g",{key:u,transform:"translate("+(100+u*250)+", 200)"},[n("rect",{x:"-80",y:"-60",width:"120",height:"120",fill:p.color,onClick:me=>s.openDialog(p.id)},null,8,P),n("text",j,r(p.id),1)],8,J))),128))])),_(a,{isOpen:o.isModalOpen,componentId:o.modalComponentId,onClose:s.closeModal},null,8,["isOpen","componentId","onClose"])])}const k=m(T,[["render",G],["__scopeId","data-v-516ade20"]]),K={methods:{logout(){}}},S=t=>(v("data-v-b11713a6"),t=t(),g(),t),U={class:"top-bar"},q={class:"container"},Q={class:"bar"},Z=S(()=>n("h1",null,"Testing App",-1)),ee={class:"user-info"},te=S(()=>n("span",null,"User Name",-1));function oe(t,e,i,c,o,s){return d(),l("div",U,[n("div",q,[n("div",Q,[Z,n("div",ee,[te,n("button",{class:"btn btn-danger",onClick:e[0]||(e[0]=(...a)=>s.logout&&s.logout(...a))},"Logout")])])])])}const I=m(K,[["render",oe],["__scopeId","data-v-b11713a6"]]),se={},ne={class:"app"},ie=H('<div class="sidebar" data-v-bfa13efe><div class="container" data-v-bfa13efe><div class="row" data-v-bfa13efe><div class="col-12" data-v-bfa13efe><ul class="nav-menu" data-v-bfa13efe><h3 class="sidebar-title" data-v-bfa13efe>SideBar Menu</h3><li data-v-bfa13efe><i class="bi bi-house" data-v-bfa13efe></i> Home</li></ul></div></div></div></div>',1),ce=[ie];function ae(t,e){return d(),l("div",ne,ce)}const C=m(se,[["render",ae],["__scopeId","data-v-bfa13efe"]]),de={class:"d-flex"},le={components:{MainField:k,TopBar:I,SideBar:C}},re=Object.assign(le,{__name:"index",setup(t){return L({title:"Схема"}),(e,i)=>{const c=Y,o=N;return d(),l("div",null,[_(I),n("div",de,[_(C),_(k),_(c),_(o)])])}}}),ue=m(re,[["__scopeId","data-v-ee9317f9"]]);export{ue as default};
